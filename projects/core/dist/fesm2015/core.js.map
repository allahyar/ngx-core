{"version":3,"file":"core.js","sources":["ng://core/lib/config.ts","ng://core/lib/tokens.ts","ng://core/lib/classes/query.class.ts","ng://core/lib/decorators/inject.decorator.ts","ng://core/lib/services/http-provider.service.ts","ng://core/lib/services/query.service.ts","ng://core/lib/util/helper.ts","ng://core/lib/services/ui.service.ts","ng://core/lib/util/string.ts","ng://core/lib/services/core-translate.service.ts","ng://core/lib/services/authentication.service.ts","ng://core/lib/services/app-load-service.service.ts","ng://core/lib/interceptors/core=http.interceptor.ts","ng://core/lib/core.module.ts","ng://core/lib/classes/token.class.ts","ng://core/lib/services/token.service.ts","ng://core/lib/interceptors/jwt.interceptor.ts","ng://core/lib/services/auth-guard.service.ts","ng://core/lib/auth.module.ts","ng://core/lib/services/dialog.service.ts","ng://core/lib/components/toast-template.component.ts","ng://core/lib/services/toast.service.ts","ng://core/lib/components/modal-template.component.ts","ng://core/lib/ui.module.ts","ng://core/lib/classes/base.class.ts","ng://core/lib/services/local-storage.service.ts","ng://core/lib/services/modal.service.ts"],"sourcesContent":["import {NgxCoolDialogsBaseConfig} from 'ngx-cool-dialogs';\r\n\r\nexport const MODULE_CONFIG_DEFAULTS = {};\r\n\r\nexport const LOCAL_STORAGE_CONFIG_DEFAULTS = {\r\n\tprefix: 'ZarsamErp'\r\n};\r\n\r\nexport const AUTH_CONFIG_DEFAULTS = {\r\n\tloginEndPoint: '/login'\r\n};\r\n\r\nexport const DIALOG_CONFIG_DEFAULTS: NgxCoolDialogsBaseConfig = {\r\n\ttheme: 'material', // available themes: 'default' | 'material' | 'dark'\r\n\tokButtonText: 'Yes',\r\n\tcancelButtonText: 'No',\r\n\tcolor: '#8030c3',\r\n};\r\n\r\n","import {InjectionToken, Type} from '@angular/core';\r\nimport {Query} from './classes/query.class';\r\n\r\nexport const QUERY_SERVICE_TOKEN = new InjectionToken<Type<Query<any>>>('QueryService');\r\n\r\nexport const DEFAULT_LANG = new InjectionToken<string>('DefaultLang');\r\nexport const SUPPORT_LANG = new InjectionToken<string>('SupportLang');\r\n","import {Observable} from 'rxjs';\r\nimport {ServerResponse} from '../interfaces/server-response.model';\r\nimport {DataInfo} from '../interfaces/data-info.model';\r\n\r\nexport abstract class Query<T> {\r\n  abstract grid(info: DataInfo): Observable<ServerResponse<T>>;\r\n  abstract get(info: DataInfo): Observable<ServerResponse<T>>;\r\n  abstract list(info: DataInfo): Observable<ServerResponse<T>>;\r\n  abstract post(info: DataInfo): Observable<ServerResponse<T>>;\r\n  abstract delete(info: DataInfo): Observable<ServerResponse<any>>;\r\n}\r\n\r\n\r\n\r\n\r\n","import {Type, InjectionToken, InjectFlags, Injector} from '@angular/core';\r\n\r\nexport function InjectToken<T>(\r\n\ttoken: Type<T> | InjectionToken<T> | any,\r\n\tnotFoundValue: T = null,\r\n\tflags?: InjectFlags\r\n) {\r\n\treturn function(target: any, key: string) {\r\n\t\tconst prev = Object.getOwnPropertyDescriptor(target, key);\r\n\t\tconst getter = function() {\r\n\t\t\tif (this['$$$Inject_' + token.toString()]) {\r\n\t\t\t\treturn this['$$$Inject_' + token.toString()];\r\n\t\t\t}\r\n\t\t\tlet localInjector = this.injector || this['$$$_Injector'];\r\n\t\t\tif (!localInjector) {\r\n\t\t\t\tfor (const filedKey in this) {\r\n\t\t\t\t\tif (this.hasOwnProperty(filedKey)) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tthis[filedKey] instanceof Injector ||\r\n\t\t\t\t\t\t\t(this[filedKey] &&\r\n\t\t\t\t\t\t\t\tthis[filedKey].constructor.name === 'Injector_')\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlocalInjector = this[filedKey];\r\n\t\t\t\t\t\t\tthis['$$$_Injector'] = localInjector;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!localInjector) {\r\n\t\t\t\tconsole.warn(\r\n\t\t\t\t\t'Could not find local Injector in  (' +\r\n\t\t\t\t\ttarget.constructor.name +\r\n\t\t\t\t\t'), use root injector instead!'\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tif (\r\n\t\t\t\t\tlocalInjector.constructor.name === 'StaticInjector' &&\r\n\t\t\t\t\tlocalInjector.parent\r\n\t\t\t\t) {\r\n\t\t\t\t\tlocalInjector = localInjector.parent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst value = (localInjector || window['$$$_root_injector']).get(\r\n\t\t\t\ttoken,\r\n\t\t\t\tnotFoundValue,\r\n\t\t\t\tflags\r\n\t\t\t);\r\n\t\t\tthis['$$$' + token.toString()] = value;\r\n\t\t\treturn value;\r\n\t\t};\r\n\t\tObject.defineProperty(target, key, {\r\n\t\t\tget: getter,\r\n\t\t\tenumerable: prev == null ? true : prev.enumerable,\r\n\t\t\tconfigurable: prev == null ? true : prev.configurable\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function GlobalInject<T>(\r\n\ttoken: Type<T> | InjectionToken<T> | any,\r\n\tnotFoundValue: T = null,\r\n\tflags?: InjectFlags\r\n) {\r\n\treturn function(target: any, key: string) {\r\n\t\tconst prev = Object.getOwnPropertyDescriptor(target, key);\r\n\t\tconst getter = function() {\r\n\t\t\tif (this['$$$Inject_' + token.toString()]) {\r\n\t\t\t\treturn this['$$$Inject_' + token.toString()];\r\n\t\t\t}\r\n\t\t\tconst localInjectors: any[] = this.injectors;\r\n\r\n\t\t\tif (!localInjectors) {\r\n\t\t\t\tconsole.warn(\r\n\t\t\t\t\t'Could not find local Injectors in  (' +\r\n\t\t\t\t\ttarget.constructor.name +\r\n\t\t\t\t\t')!'\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = localInjectors.length - 1; i >= 0; --i) {\r\n\t\t\t\t\tconst injector = localInjectors[i];\r\n\t\t\t\t\tconst value = injector.get(token, notFoundValue, flags);\r\n\t\t\t\t\tthis['$$$' + token.toString()] = value;\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t};\r\n\t\tObject.defineProperty(target, key, {\r\n\t\t\tget: getter,\r\n\t\t\tenumerable: prev == null ? true : prev.enumerable,\r\n\t\t\tconfigurable: prev == null ? true : prev.configurable\r\n\t\t});\r\n\t};\r\n}\r\n","import {Observable} from 'rxjs';\r\nimport {HttpClient, HttpEvent} from '@angular/common/http';\r\nimport {Inject, Injectable, Injector} from '@angular/core';\r\nimport {ServerResponse} from '../interfaces/server-response.model';\r\nimport {CoreModuleConfig} from '../interfaces/config.model';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class HttpProvider<T> {\r\n\r\n\tpublic _baseUrl = null;\r\n\r\n\tconstructor(\r\n\t\t@Inject('config') private config: CoreModuleConfig,\r\n\t\tprivate http: HttpClient,\r\n\t\tprivate injector: Injector) {\r\n\r\n\t\tif (!this.config.api.useInterceptor) {\r\n\t\t\tthis._baseUrl = this.config.api.baseUrl;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tget(url: string, options?: any)\r\n\t\t: Observable<any> {\r\n\t\t// this.http.get<any>(data.url);\r\n\t\t// return new Observable((observer) => {\r\n\t\t// \tobserver.next({success: true});\r\n\t\t// \tobserver.complete();\r\n\t\t// });\r\n\t\treturn this.http.get<ServerResponse<T>>(this._baseUrl + url, options);\r\n\t}\r\n\r\n\tpost(url: string, body: any, options?: any): Observable<any> {\r\n\t\treturn this.http.post(this._baseUrl + url, body, options);\r\n\t}\r\n\r\n}\r\n","import {Injectable, Injector} from '@angular/core';\r\nimport {Query} from '../classes/query.class';\r\nimport {Observable} from 'rxjs';\r\nimport {DataInfo} from '../interfaces/data-info.model';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\nimport {HttpProvider} from './http-provider.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class QueryService<T> extends Query<T> {\r\n\r\n\t@InjectToken(HttpProvider) http: HttpProvider<T>;\r\n\r\n\tconstructor(private injector: Injector) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tdelete(info: DataInfo): Observable<T> {\r\n\t\treturn this.http.get('dadad');\r\n\t}\r\n\r\n\tget(info: DataInfo): Observable<T> {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tlist(info: DataInfo): Observable<T> {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tpost(info: DataInfo): Observable<T> {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tgrid(info: DataInfo): Observable<T> {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n}\r\n","import {HttpClient} from '@angular/common/http';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\nimport {TranslateLoader, TranslateModuleConfig} from '@ngx-translate/core';\r\nimport {AppLoadService} from '../services/app-load-service.service';\r\n\r\n// required for AOT compilation\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n\treturn new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n// ngx-translate and the loader module\r\nexport const translateModuleOptions: TranslateModuleConfig = {\r\n\tloader: {\r\n\t\tprovide: TranslateLoader,\r\n\t\tuseFactory: (HttpLoaderFactory),\r\n\t\tdeps: [HttpClient]\r\n\t}\r\n};\r\n\r\nexport function init_app(appLoadService: AppLoadService) {\r\n\treturn () => appLoadService.initializeApp();\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\n\r\n@Injectable()\r\nexport class UiService {\r\n\r\n  @InjectToken(DOCUMENT)\r\n  document: Document;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  setDirection(dir: any) {\r\n    this.document.dir = dir;\r\n  }\r\n\r\n  get direction(): any {\r\n    return this.document.dir;\r\n  }\r\n\r\n\r\n}\r\n","export function isString(obj: any): boolean {\r\n\treturn typeof obj === 'string';\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {TranslateService} from '@ngx-translate/core';\r\nimport {isString} from '../util/string';\r\nimport {BehaviorSubject, Observable} from 'rxjs';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class CoreTranslateService {\r\n\r\n\t_isLoaded = new BehaviorSubject(false);\r\n\r\n\tconstructor(private _translateService: TranslateService) {\r\n\t}\r\n\r\n\taddLangs(langs: string[]): void {\r\n\t\treturn this._translateService.addLangs(langs);\r\n\t}\r\n\r\n\tuse(lang: string): Observable<any> {\r\n\t\treturn this._translateService.use(lang);\r\n\t}\r\n\r\n\tsetDefaultLang(lang: string): void {\r\n\t\tthis._translateService.setDefaultLang(lang);\r\n\t}\r\n\r\n\tinstant(\r\n\t\tkey: string | Array<string>,\r\n\t\tinterpolateParams?: Object\r\n\t): string | any {\r\n\t\tif (isString(key) && key.indexOf(':') > 0) {\r\n\t\t\tconst items = (key as string).split(':');\r\n\t\t\treturn items\r\n\t\t\t\t.map(item => this._translateService.instant(item, interpolateParams))\r\n\t\t\t\t.join(' ');\r\n\t\t}\r\n\r\n\t\treturn this._translateService.instant(key, interpolateParams);\r\n\t}\r\n\r\n\tisCompleted() {\r\n\t\tthis._isLoaded.next(true);\r\n\t}\r\n\r\n\tget loaded(): Observable<boolean> {\r\n\t\treturn this._isLoaded.asObservable();\r\n\t}\r\n\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {HttpProvider} from './http-provider.service';\r\nimport {Observable, ReplaySubject} from 'rxjs';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\nimport {AuthModuleConfig} from '../interfaces/config.model';\r\nimport {UserResponse} from '../interfaces/auth.model';\r\nimport {Router} from '@angular/router';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class AuthenticationService {\r\n\r\n\t@InjectToken(HttpProvider) http: HttpProvider<UserResponse>;\r\n\r\n\tprivate _currentUserSubject = new ReplaySubject<UserResponse>(1);\r\n\tprivate _currentUserValue: UserResponse;\r\n\r\n\tconstructor(@Inject('authConfig') private config: AuthModuleConfig,\r\n\t\t\t\tprivate router: Router) {\r\n\t}\r\n\r\n\tget currentUserValue(): UserResponse {\r\n\t\treturn this._currentUserValue;\r\n\t}\r\n\r\n\tget currentUser(): Observable<any> {\r\n\t\treturn this._currentUserSubject.asObservable();\r\n\t}\r\n\r\n\tsetting(prop: string): any {\r\n\t\tif (prop.indexOf('.') > 0) {\r\n\t\t\tconst split = prop.split('.');\r\n\t\t\t// return this.currentUserValue.setting.bind(split);\r\n\t\t}\r\n\t\treturn this.currentUserValue.setting[prop];\r\n\t}\r\n\r\n\tlogin(username: string, password: string) {\r\n\r\n\t}\r\n\r\n\tverifyToken(token?: string): Observable<boolean> {\r\n\t\treturn this.http.get(this.config.tokenVerifyEndPoint).pipe(map(res => {\r\n\t\t\tif (res.success) {\r\n\t\t\t\tconsole.log(res.success);\r\n\t\t\t\tthis._currentUserValue = res.result;\r\n\t\t\t\tthis._currentUserSubject.next(res.result);\r\n\t\t\t\tthis.router.navigateByUrl(this.config.loginEndPoint);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}));\r\n\t}\r\n\r\n\tloggedIn(): boolean {\r\n\t\treturn this._currentUserValue !== null;\r\n\t}\r\n\r\n\tlogout(endPoint: string): Promise<boolean> {\r\n\t\treturn new Promise<boolean>((resolve, reject) => {\r\n\t\t\tthis.http.get(endPoint || this.config.logoutEndPoint).subscribe(res => {\r\n\t\t\t\tthis._currentUserSubject.next(null);\r\n\t\t\t\tthis._currentUserValue = null;\r\n\t\t\t\tthis.router.navigateByUrl(this.config.guards.loggedOutGuard.redirectUrl);\r\n\t\t\t\tresolve(true);\r\n\t\t\t}, (err) => reject);\r\n\t\t});\r\n\t}\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {CoreTranslateService} from './core-translate.service';\r\nimport {AuthenticationService} from './authentication.service';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\nimport {AuthModuleConfig} from '../interfaces/config.model';\r\n\r\n@Injectable()\r\nexport class AppLoadService {\r\n\r\n\t@InjectToken(AuthenticationService) _authService: AuthenticationService;\r\n\r\n\tconstructor(private _translateService: CoreTranslateService,\r\n\t\t\t\t@Inject('authConfig') private config: AuthModuleConfig) {\r\n\t}\r\n\r\n\tinitializeApp(): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._translateService.loaded.subscribe(completed => {\r\n\t\t\t\tif (completed) {\r\n\t\t\t\t\tif (!this.config.useTokenVerify) {\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._authService.verifyToken().subscribe(res => {\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {CoreModuleConfig} from '../interfaces/config.model';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class CoreHttpInterceptor implements HttpInterceptor {\r\n\r\n\tconstructor(@Inject('config') private config: CoreModuleConfig) {\r\n\t}\r\n\r\n\tintercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n\t\tlet changeHeader;\r\n\t\tif (this.config.api.useInterceptor) {\r\n\t\t\tchangeHeader = {url: `${this.config.api.baseUrl}${req.url}`};\r\n\t\t}\r\n\t\tconst apiReq = req.clone(changeHeader);\r\n\t\treturn next.handle(apiReq);\r\n\r\n\t}\r\n\r\n}\r\n","import {APP_INITIALIZER, Inject, Injector, ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {Query} from './classes/query.class';\r\nimport {QueryService} from './services/query.service';\r\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\r\nimport {CoreModuleConfig} from './interfaces/config.model';\r\nimport {DEFAULT_LANG, QUERY_SERVICE_TOKEN, SUPPORT_LANG} from './tokens';\r\nimport {InjectToken} from './decorators/inject.decorator';\r\nimport {TranslateModule} from '@ngx-translate/core';\r\nimport {init_app, translateModuleOptions} from './util/helper';\r\nimport {UiService} from './services/ui.service';\r\nimport {CoreTranslateService} from './services/core-translate.service';\r\nimport {AppLoadService} from './services/app-load-service.service';\r\nimport {CoreHttpInterceptor} from './interceptors/core=http.interceptor';\r\n\r\n\r\n@NgModule({\r\n\tdeclarations: [],\r\n\timports: [\r\n\t\tHttpClientModule,\r\n\t\tTranslateModule.forRoot(translateModuleOptions)\r\n\t],\r\n\texports: [TranslateModule]\r\n})\r\nexport class CoreModule {\r\n\r\n\t@InjectToken(CoreTranslateService)\r\n\t_translateService: CoreTranslateService;\r\n\r\n\t@InjectToken(UiService)\r\n\t_uiService: UiService;\r\n\r\n\tconstructor(@Inject(DEFAULT_LANG) defaultLang: string,\r\n\t\t\t\t@Inject(SUPPORT_LANG) supportLang: string[],\r\n\t\t\t\tinjector: Injector) {\r\n\r\n\t\twindow['$$$_root_injector'] = injector;\r\n\r\n\t\tthis._translateService.addLangs(supportLang);\r\n\t\tthis._translateService.setDefaultLang(defaultLang);\r\n\t\tthis._translateService.use(defaultLang).subscribe(res => {\r\n\r\n\t\t\tconst dir = defaultLang === 'fa' ? 'rtl' : 'ltr';\r\n\t\t\tthis._uiService.setDirection(dir);\r\n\t\t\tthis._translateService.isCompleted();\r\n\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\r\n\tstatic forRoot(config?: CoreModuleConfig): ModuleWithProviders {\r\n\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [\r\n\t\t\t\tUiService,\r\n\t\t\t\tCoreTranslateService,\r\n\t\t\t\tAppLoadService,\r\n\t\t\t\t{provide: APP_INITIALIZER, useFactory: init_app, deps: [AppLoadService], multi: true},\r\n\t\t\t\t{provide: 'config', useValue: config},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: HTTP_INTERCEPTORS,\r\n\t\t\t\t\tuseClass: CoreHttpInterceptor,\r\n\t\t\t\t\tmulti: true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: Query,\r\n\t\t\t\t\tuseClass: QueryService\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: QUERY_SERVICE_TOKEN,\r\n\t\t\t\t\tuseValue: QueryService\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: DEFAULT_LANG,\r\n\t\t\t\t\tuseValue: (config && config.language.default) || 'en'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: SUPPORT_LANG,\r\n\t\t\t\t\tuseValue: (config && config.language.support) || ['en', 'fa']\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n}\r\n","declare function escape(s: string): string;\r\n\r\nexport class TokenError extends Error {\r\n\r\n\tname = 'TokenError';\r\n\r\n\tconstructor(message: string) {\r\n\t\tsuper(message);\r\n\t}\r\n}\r\n\r\nexport class Token {\r\n\tconstructor(public token: string) {\r\n\t\tif (this.token != null && this.isExpired()) {\r\n\t\t\ttoken = null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate decodeBase64(str: string): string {\r\n\t\tlet output = str.replace(/-/g, '+').replace(/_/g, '/');\r\n\t\tswitch (output.length % 4) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\toutput += '==';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\toutput += '=';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tthrow new TokenError('Illegal base64url string!');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn decodeURIComponent(escape(typeof window === 'undefined' ? atob(output) : window.atob(output)));\r\n\t}\r\n\r\n\tpublic decodeToken(): any {\r\n\t\tconst parts = this.token.split('.');\r\n\r\n\t\tif (parts.length !== 3) {\r\n\t\t\tthrow new TokenError('A JWT Token must have 3 parts!');\r\n\t\t}\r\n\r\n\t\tconst decoded = this.decodeBase64(parts[1]);\r\n\t\tif (!decoded) {\r\n\t\t\tthrow new TokenError('Cannot decode the token!');\r\n\t\t}\r\n\r\n\t\treturn JSON.parse(decoded);\r\n\t}\r\n\r\n\tpublic getExpirationDate(): Date {\r\n\t\tconst decoded = this.decodeToken();\r\n\r\n\t\tif (!decoded.hasOwnProperty('exp')) {\r\n\t\t\treturn new Date();\r\n\t\t}\r\n\r\n\t\tconst date = new Date(0);\r\n\t\tdate.setUTCSeconds(decoded.exp);\r\n\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic isExpired(offsetSeconds: number = 0): boolean {\r\n\t\tconst date = this.getExpirationDate();\r\n\r\n\t\tif (date.getSeconds() === new Date().getSeconds()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !(date.valueOf() > (new Date().valueOf() + (offsetSeconds * 1000)));\r\n\t}\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {BehaviorSubject, Observable} from 'rxjs';\r\nimport {Token} from '../classes/token.class';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TokenService {\r\n\r\n  private _token: BehaviorSubject<Token>;\r\n\r\n  constructor() {\r\n    this._token = new BehaviorSubject(new Token(localStorage.getItem('satellizer_token')));\r\n  }\r\n\r\n  /**\r\n   * Get the current token.\r\n   */\r\n  getToken(): Token {\r\n    const token = this._token.getValue();\r\n    return (token && token.token) ? token : null;\r\n  }\r\n\r\n  /**\r\n   * Returns an stream of tokens.\r\n   */\r\n  getTokenStream(): Observable<Token> {\r\n    return this._token.asObservable();\r\n  }\r\n\r\n  /**\r\n   * Update the current token.\r\n   */\r\n  setToken(token: string) {\r\n    this._token.next(new Token(token));\r\n  }\r\n\r\n  /**\r\n   * Remove the current token.\r\n   */\r\n  removeToken() {\r\n    this._token.next(null);\r\n  }\r\n\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {TokenService} from '../services/token.service';\r\nimport {HttpEvent, HttpHandler, HttpRequest} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {Token} from '../classes/token.class';\r\nimport {AuthModuleConfig} from '../interfaces/config.model';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class JwtInterceptor {\r\n\r\n\tconstructor(@Inject('authConfig') private config: AuthModuleConfig,\r\n\t\t\t\tprivate _tokenService: TokenService) {\r\n\t}\r\n\r\n\tintercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n\t\tconst token: Token = this._tokenService.getToken();\r\n\r\n\t\tif (token && !token.isExpired()) {\r\n\t\t\t// {headers: req.headers.set(this.config.headerName, this.config.headerPrefix + ' ' + token.token)}\r\n\t\t\treq = req.clone({\r\n\t\t\t\tsetHeaders: {Authorization: `${this.config.headerPrefix} ${token.token}`}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn next.handle(req);\r\n\t}\r\n\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {CanActivate, Router} from '@angular/router';\r\nimport {TokenService} from './token.service';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\nimport {AuthenticationService} from './authentication.service';\r\nimport {AuthModuleConfig} from '../interfaces/config.model';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class LoggedInAuth implements CanActivate {\r\n\r\n\r\n\t@InjectToken(AuthenticationService)\r\n\t_authenticationService: AuthenticationService;\r\n\r\n\t@InjectToken(TokenService)\r\n\t_tokenService: TokenService;\r\n\r\n\t@InjectToken(Router)\r\n\t_router: Router;\r\n\r\n\tconstructor(@Inject('authConfig') private config: AuthModuleConfig) {\r\n\t}\r\n\r\n\tcanActivate() {\r\n\r\n\t\tconst token = this._tokenService.getToken();\r\n\r\n\t\tif (token && token.token) {\r\n\t\t\treturn !token.isExpired();\r\n\t\t}\r\n\r\n\t\tlet redirectUrl = this.config.guards.loggedInGuard.redirectUrl;\r\n\t\tif (redirectUrl) {\r\n\t\t\treturn this._router.navigate([redirectUrl]);\r\n\t\t}\r\n\t\treturn false;\r\n\r\n\t}\r\n}\r\n\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class LoggedOutAuth implements CanActivate {\r\n\r\n\t@InjectToken(AuthenticationService)\r\n\t_authenticationService: AuthenticationService;\r\n\r\n\t@InjectToken(TokenService)\r\n\t_tokenService: TokenService;\r\n\r\n\t@InjectToken(Router)\r\n\t_router: Router;\r\n\r\n\tconstructor(@Inject('authConfig') private config: AuthModuleConfig) {\r\n\t}\r\n\r\n\tcanActivate() {\r\n\r\n\t\tconst token = this._tokenService.getToken();\r\n\r\n\t\tif (token && token.token && !token.isExpired()) {\r\n\t\t\tconst redirectUrl = this.config.guards.loggedOutGuard.redirectUrl;\r\n\t\t\tif (redirectUrl) {\r\n\t\t\t\treturn this._router.navigate([redirectUrl]);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n","import {ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\r\nimport {JwtInterceptor} from './interceptors/jwt.interceptor';\r\nimport {RouterModule} from '@angular/router';\r\nimport {LoggedInAuth, LoggedOutAuth} from './services/auth-guard.service';\r\nimport {AuthenticationService} from './services/authentication.service';\r\nimport {AuthModuleConfig} from './interfaces/config.model';\r\n\r\n\r\n@NgModule({\r\n\tdeclarations: [],\r\n\timports: [CommonModule, HttpClientModule, RouterModule]\r\n})\r\nexport class AuthModule {\r\n\r\n\tstatic forRoot(config?: AuthModuleConfig): ModuleWithProviders {\r\n\r\n\t\treturn {\r\n\t\t\tngModule: AuthModule,\r\n\t\t\tproviders: [\r\n\t\t\t\t{provide: 'authConfig', useValue: config},\r\n\t\t\t\tAuthenticationService, LoggedInAuth, LoggedOutAuth,\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: HTTP_INTERCEPTORS,\r\n\t\t\t\t\tuseClass: JwtInterceptor,\r\n\t\t\t\t\tmulti: true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {NgxCoolDialogResult, NgxCoolDialogsLocalConfig, NgxCoolDialogsService} from 'ngx-cool-dialogs';\r\nimport {UiModuleConfig} from '../interfaces/config.model';\r\nimport {InjectToken} from '../decorators/inject.decorator';\r\nimport {CoreTranslateService} from './core-translate.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class DialogService {\r\n\r\n\t@InjectToken(NgxCoolDialogsService)\r\n\t_dialogService: NgxCoolDialogsService;\r\n\r\n\tprivate _config: NgxCoolDialogsLocalConfig;\r\n\r\n\tconstructor(@Inject('uiConfig') private config: UiModuleConfig,\r\n\t\t\t\tprivate _translateService: CoreTranslateService) {\r\n\t\tthis._translateService.loaded.subscribe(res => {\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log('asasas');\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.reConfig();\r\n\r\n\t}\r\n\r\n\tprompt(prompt: string): NgxCoolDialogResult {\r\n\t\tprompt = this._translateService.instant(prompt);\r\n\t\treturn this._dialogService.prompt(prompt, this._config);\r\n\t}\r\n\r\n\tconfirm(message: string) {\r\n\t\tmessage = this._translateService.instant(message);\r\n\t\treturn this._dialogService.confirm(message, this._config);\r\n\t}\r\n\r\n\r\n\talert(message: string) {\r\n\t\treturn this._dialogService.alert(message, this._config);\r\n\t}\r\n\r\n\treConfig() {\r\n\r\n\t\tconst {theme, defaultText, cancelButtonText, okButtonText, color} = this.config.dialog;\r\n\t\t// console.log(theme);\r\n\r\n\t\tthis._config = {\r\n\t\t\ttheme,\r\n\t\t\tcolor,\r\n\t\t\tdefaultText: this._translateService.instant(defaultText),\r\n\t\t\tcancelButtonText: this._translateService.instant(cancelButtonText),\r\n\t\t\tokButtonText: this._translateService.instant(okButtonText),\r\n\t\t};\r\n\r\n\t}\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Toast} from 'ngx-toast-notifications';\r\n\r\n@Component({\r\n\tselector: 'lib-toast-template',\r\n\ttemplate: `\r\n\t\t<div class=\"toast-container\">\r\n\t\t\t<div class=\"toast-icon\">\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div class=\"toast-message\">\r\n\t\t\t\t<span class=\"msg-caption\">\r\n\t\t\t\t\t{{toast.caption}}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"msg-text\">\r\n\t\t\t\t\t{{toast.text}}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`,\r\n\tstyleUrls: ['./toast-template.component.scss']\r\n})\r\nexport class ToastTemplateComponent {\r\n\r\n\t@Input() toast: Toast;\r\n\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {CoreTranslateService} from './core-translate.service';\r\nimport {UiModuleConfig} from '../interfaces/config.model';\r\nimport {Toast, Toaster} from 'ngx-toast-notifications';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ToastService {\r\n\r\n\tconstructor(private _translateService: CoreTranslateService,\r\n\t\t\t\tprivate _toast: Toaster,\r\n\t\t\t\t@Inject('uiConfig') private config: UiModuleConfig) {\r\n\t}\r\n\r\n\tsuccess(text: string, replace?: Object, duration?: number): Toast {\r\n\r\n\t\tduration = duration || this.config.toast.duration;\r\n\t\tconst caption = this._translateService.instant('GLOBAL.OK_TITLE', replace);\r\n\t\ttext = this._translateService.instant(text, replace);\r\n\r\n\t\treturn this._toast.open({text, type: 'success', caption, duration});\r\n\t}\r\n\r\n\twarning(text: string, replace?: Object, duration?: number): Toast {\r\n\r\n\t\tduration = duration || this.config.toast.duration;\r\n\t\tconst caption = this._translateService.instant('GLOBAL.OK_TITLE', replace);\r\n\t\ttext = this._translateService.instant(text, replace);\r\n\r\n\t\treturn this._toast.open({text, type: 'warning', caption, duration});\r\n\t}\r\n\r\n\terror(text: string, replace?: Object, duration?: number): Toast {\r\n\r\n\t\tduration = duration || this.config.toast.duration;\r\n\t\tconst caption = this._translateService.instant('GLOBAL.ERROR_TITLE', replace);\r\n\t\ttext = this._translateService.instant(text, replace);\r\n\r\n\t\treturn this._toast.open({text, type: 'danger', caption, duration});\r\n\t}\r\n\r\n\tinfo(text: string, replace?: Object, duration?: number): Toast {\r\n\r\n\t\tduration = duration || this.config.toast.duration;\r\n\t\tconst caption = this._translateService.instant('GLOBAL.INFO_TITLE', replace);\r\n\t\ttext = this._translateService.instant(text, replace);\r\n\r\n\t\treturn this._toast.open({text, type: 'info', caption, duration});\r\n\t}\r\n\r\n}\r\n","import {\r\n\tComponent,\r\n\tComponentFactoryResolver,\r\n\tComponentRef,\r\n\tInput,\r\n\tOnDestroy,\r\n\tOnInit,\r\n\tViewChild,\r\n\tViewContainerRef\r\n} from '@angular/core';\r\nimport {BsModalRef} from 'ngx-bootstrap';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\n\r\n@Component({\r\n\ttemplate: `\r\n\t\t<div class=\"modal-header\">\r\n\t\t\t<h5 class=\"modal-title\">{{title}}</h5>\r\n\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\r\n\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"modal-body\">\r\n\t\t\t<form [formGroup]=\"form\">\r\n\t\t\t\t<ng-container #container></ng-container>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t`,\r\n\tstyleUrls: ['./modal-template.component.css']\r\n})\r\nexport class ModalTemplateComponent implements OnInit, OnDestroy {\r\n\r\n\tform: FormGroup;\r\n\r\n\ttitle: string;\r\n\ttype: any;\r\n\tdata: any;\r\n\r\n\r\n\tcomponent: any;\r\n\tcomponentRef: ComponentRef<any>;\r\n\r\n\t@Input() set componentType(c: any) {\r\n\t\tthis.component = c;\r\n\t\tthis.renderContent();\r\n\t}\r\n\r\n\t@ViewChild('container', {\r\n\t\tread: ViewContainerRef,\r\n\t\tstatic: true\r\n\t}) container: ViewContainerRef;\r\n\r\n\tconstructor(public modalRef: BsModalRef,\r\n\t\t\t\tprivate fb: FormBuilder) {\r\n\t\tthis.form = fb.group({});\r\n\t}\r\n\r\n\r\n\trenderContent() {\r\n\t\tthis.container.clear();\r\n\t\tconst injector = this.container.injector;\r\n\t\tconst cfr = injector.get(ComponentFactoryResolver);\r\n\t\tconst componentFactory = cfr.resolveComponentFactory(this.component);\r\n\t\tconst componentRef = this.container.createComponent<any>(componentFactory);\r\n\t\tcomponentRef.instance.form = this.form;\r\n\t\tthis.componentRef = componentRef;\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tif (this.componentRef) {\r\n\t\t\tthis.componentRef.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import {ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {NgxCoolDialogsModule} from 'ngx-cool-dialogs';\r\nimport {UiModuleConfig} from './interfaces/config.model';\r\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\r\nimport {DIALOG_CONFIG_DEFAULTS} from './config';\r\nimport {DialogService} from './services/dialog.service';\r\nimport {ToastNotificationsModule} from 'ngx-toast-notifications';\r\nimport {ToastTemplateComponent} from './components/toast-template.component';\r\nimport {ToastService} from './services/toast.service';\r\nimport {NgbDatepickerModule} from '@ng-bootstrap/ng-bootstrap';\r\nimport {ModalModule} from 'ngx-bootstrap';\r\nimport {ModalTemplateComponent} from './components/modal-template.component';\r\nimport {ReactiveFormsModule} from '@angular/forms';\r\n\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tModalTemplateComponent,\r\n\t\tToastTemplateComponent\r\n\t],\r\n\timports: [\r\n\t\tBrowserAnimationsModule,\r\n\t\tNgxCoolDialogsModule.forRoot(DIALOG_CONFIG_DEFAULTS),\r\n\t\tToastNotificationsModule.forRoot({component: ToastTemplateComponent}),\r\n\t\tNgbDatepickerModule,\r\n\t\tModalModule.forRoot(),\r\n\t\tCommonModule,\r\n\t\tReactiveFormsModule\r\n\t],\r\n\tentryComponents: [\r\n\t\tModalTemplateComponent,\r\n\t\tToastTemplateComponent\r\n\t]\r\n})\r\nexport class UIModule {\r\n\r\n\tstatic forRoot(config: UiModuleConfig): ModuleWithProviders {\r\n\r\n\t\treturn {\r\n\t\t\tngModule: UIModule,\r\n\t\t\tproviders: [\r\n\t\t\t\t{provide: 'uiConfig', useValue: config},\r\n\t\t\t\tDialogService,\r\n\t\t\t\tToastService\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n}\r\n","import {OnDestroy, OnInit} from '@angular/core';\r\n\r\nexport abstract class Base implements OnInit, OnDestroy {\r\n\r\n  isAlive = true;\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  // .pipe(takeWhile(x => this.isAlive))\r\n\r\n  ngOnDestroy(): void {\r\n    this.isAlive = false;\r\n  }\r\n}\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {LocalStorageConfig} from '../interfaces/config.model';\r\nimport {LOCAL_STORAGE_CONFIG_DEFAULTS} from '../config';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocalStorage {\r\n\r\n  _prefix: string;\r\n\r\n  constructor(@Inject('config') config?: LocalStorageConfig) {\r\n    if (config) {\r\n      this._prefix = config.prefix || LOCAL_STORAGE_CONFIG_DEFAULTS.prefix;\r\n    }\r\n  }\r\n\r\n  set(key: string, value: string, expiredAt?: number, prefix?: string) {\r\n\r\n    if (value !== null) {\r\n      const data = {\r\n        expire: expiredAt || 0,\r\n        data: value\r\n      };\r\n      localStorage.setItem(`${prefix || this._prefix}.${key}`, JSON.stringify(data));\r\n    }\r\n\r\n  }\r\n\r\n  getKey(index: number): string | null | undefined {\r\n    if (index < 0) {\r\n      console.error(new Error('index has to be 0 or greater'));\r\n    }\r\n    try {\r\n      return localStorage.key(index);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  has(key: string, prefix?: string): boolean {\r\n    return (`${prefix || this._prefix}.${key}` in localStorage);\r\n  }\r\n\r\n  get(key: string, prefix?: string): string | null | undefined {\r\n    try {\r\n      return localStorage.getItem(`${prefix || this._prefix}.${key}`);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  remove(key: string, prefix?: string): void {\r\n    try {\r\n      localStorage.removeItem(`${prefix || this._prefix}_${key}`);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  clear(): void {\r\n    try {\r\n      localStorage.clear();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n}\r\n","import {\r\n\tComponentFactory,\r\n\tComponentFactoryResolver,\r\n\tComponentRef,\r\n\tInject,\r\n\tInjectable,\r\n\tInjector, ViewContainerRef\r\n} from '@angular/core';\r\nimport {BsModalRef, BsModalService} from 'ngx-bootstrap';\r\nimport {UiModuleConfig} from '../interfaces/config.model';\r\nimport {ModalTemplateComponent} from '../components/modal-template.component';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ModalService {\r\n\r\n\tconstructor(private _modalService: BsModalService,\r\n\t\t\t\tprivate resolver: ComponentFactoryResolver,\r\n\t\t\t\tprivate injector: Injector,\r\n\t\t\t\t@Inject('uiConfig') private config: UiModuleConfig) {\r\n\t}\r\n\r\n\r\n\topen(componentType: any, config?: IModalConfig): BsModalRef {\r\n\r\n\t\tconst ref = this._modalService.show(ModalTemplateComponent, {class: config.class});\r\n\t\tconst content = (ref.content as ModalTemplateComponent);\r\n\r\n\t\tcontent.componentType = componentType;\r\n\t\tcontent.title = config.title || 'title';\r\n\t\tcontent.type = config.type || 'add';\r\n\t\tcontent.data = config.data || {};\r\n\r\n\t\treturn ref;\r\n\t}\r\n\r\n}\r\n\r\nexport interface IModalConfig {\r\n\ttitle?: string;\r\n\ttype?: 'edit' | 'add' | any;\r\n\tdata?: any;\r\n\tclass?: 'modal-lg' | 'modal-sm';\r\n}\r\n"],"names":["tslib_1.__decorate"],"mappings":"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"}